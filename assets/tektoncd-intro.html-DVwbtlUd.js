import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as e,o as n}from"./app-ibx1Fi7L.js";const l="/assets/cover-DXNHlhoG.png",t="/assets/docker-desktop-4uAxfVsY.png",h={};function p(k,s){return n(),a("div",null,[...s[0]||(s[0]=[e('<p><img src="'+l+'" alt="TektonCD Cover"></p><h2 id="先来回答几个问题" tabindex="-1"><a class="header-anchor" href="#先来回答几个问题"><span>先来回答几个问题</span></a></h2><p><strong>Tekton 是什么？</strong></p><blockquote><p>Tekton 是一个运行于 K8S 之上的，云原生 CI/CD 系统。</p></blockquote><p><strong>Tekton 可以做什么？</strong></p><blockquote><ol><li>编排 CI/CD 任务，执行 build 、test、deploy 等操作；</li><li>基于容器的 Runtime，让 Tekton 不仅限于只是 CI/CD 工具，可以执行任何容器化编排任务；</li></ol></blockquote><p><strong>我们为什么要选择 Tekton？</strong></p><blockquote><ol><li>运行环境基于 K8S，采用 Job 任务弹性执行；</li><li>基于容器化运行时，可配置每一个任务调度可需要的资源，灵活性和可定制型很高；</li><li>类似 Serverless 机制的按需调用服务器资源，利用率极高，不需要排队和等待；</li></ol></blockquote><h2 id="用一张脑图认识-tekton" tabindex="-1"><a class="header-anchor" href="#用一张脑图认识-tekton"><span>用一张脑图认识 Tekton</span></a></h2><p>...</p><h2 id="创建一个-kubernetes-集群" tabindex="-1"><a class="header-anchor" href="#创建一个-kubernetes-集群"><span>创建一个 Kubernetes 集群</span></a></h2><p>这里我没有采用官方文档提到的 <code>minikube</code>，而是直接使用了 <code>Docker-Desktop</code> macOS 图形客户端；</p><p><img src="'+t+`" alt="Docker Desktop"></p><p>具体的安装方式点击这里：<a href="https://www.docker.com/products/docker-desktop/" target="_blank" rel="noopener noreferrer">Docker Desktop - Docker</a></p><h2 id="安装-tekton-pipelines" tabindex="-1"><a class="header-anchor" href="#安装-tekton-pipelines"><span>安装 Tekton Pipelines</span></a></h2><h3 id="安装-tekton-pipelines-1" tabindex="-1"><a class="header-anchor" href="#安装-tekton-pipelines-1"><span>安装 Tekton Pipelines</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apply</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --filename</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://storage.googleapis.com/tekton-releases/pipeline/latest/release.yaml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Tekton 实际上只会安装两个 Pod，分别是 <code>tekton-pipelines-controller</code> 和 <code>tekton-pipelines-webhook</code>。</p><h4 id="解决无法下载-gcr-io-镜像的问题" tabindex="-1"><a class="header-anchor" href="#解决无法下载-gcr-io-镜像的问题"><span>解决无法下载 gcr.io 镜像的问题</span></a></h4><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">## 依赖需要的 gcr.io 镜像，可自行拉去后，推送到自己的镜像仓库，最后替换 Tekton Pipelines release.yaml 中的相关域名</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/controller:latest</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/kubeconfigwriter:latest</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/git-init:latest</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/entrypoint:latest</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/nop:latest</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/imagedigestexporter:latest</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/pullrequest-init:latest</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/workingdirinit:latest</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/webhook:latest</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">gcr.io/google.com/cloudsdktool/cloud-sdk:latest</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">distroless.dev/busybox:latest</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">mcr.microsoft.com/powershell:nanoserver:latest</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="检查是否安装成功" tabindex="-1"><a class="header-anchor" href="#检查是否安装成功"><span>检查是否安装成功</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pods</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --namespace</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tekton-pipelines</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --watch</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 输出示例</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">NAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                                           READY</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   STATUS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    RESTARTS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   AGE</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tekton-pipelines-controller-54c7997dc7-ldnmr</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   1/1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     Running</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">          3d</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tekton-pipelines-webhook-59987d7bfc-vn8gd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      1/1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     Running</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">          3d</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="使用-task-执行一个任务" tabindex="-1"><a class="header-anchor" href="#使用-task-执行一个任务"><span>使用 Task 执行一个任务</span></a></h2><h3 id="创建并安装一个-task" tabindex="-1"><a class="header-anchor" href="#创建并安装一个-task"><span>创建并安装一个 Task</span></a></h3><p>先定义一个 <code>hello-world.yaml</code></p><p>内容为通过 echo 打印一个 Message，并且定义了一个 <code>MESSAGE</code> 参数</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">tekton.dev/v1beta1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Task</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">hello-world</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    params</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">MESSAGE</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">string</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        default</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Tekton.</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    steps</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">echo</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          image</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">alpine</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          script</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">|</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">              #!/bin/sh</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">              echo &quot;Hello&quot; &quot;$(params.MESSAGE)&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>安装 Task 到 Tekton Pipeline 中</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apply</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --filename</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hello-world.yaml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="创建一个-taskrun-并运行" tabindex="-1"><a class="header-anchor" href="#创建一个-taskrun-并运行"><span>创建一个 TaskRun 并运行</span></a></h3><p>定义一个 TaskRun <code>hello-world-run.yaml</code></p><p>通过 <code>TaskRef</code> 引用上一步安装好的 <code>hello-world</code> 传入支持参数 <code>MESSAGE</code></p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">tekton.dev/v1beta1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">TaskRun</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">hello-world-run</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    serviceAccountName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:  </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">default</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    taskRef</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">hello-world</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    params</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">MESSAGE</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Larry Koo</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行 Hello Task Run</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apply</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --filename</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hello-world-run.yaml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>通过以下命令可以观察运行日志</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tkn</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> taskrun</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> logs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hello-world-run</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="使用-pipeline-执行一个任务" tabindex="-1"><a class="header-anchor" href="#使用-pipeline-执行一个任务"><span>使用 Pipeline 执行一个任务</span></a></h2><h3 id="创建一个-pipeline-并安装" tabindex="-1"><a class="header-anchor" href="#创建一个-pipeline-并安装"><span>创建一个 Pipeline 并安装</span></a></h3><p>先定义一个 <code>hello-pipeline.yaml</code></p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">tekton.dev/v1beta1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Pipeline</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">hello-pipeline</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    params</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">P_MESSAGE</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          description</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;This is a parameter for P_MESSAGE&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">string</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          default</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;I am a pipeline message.&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    tasks</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">echo-message</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          taskRef</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">              name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">hello-task</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          params</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">              - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">MESSAGE</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">                value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">$(params.P_MESSAGE)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>安装 <code>hello-pipeline.yaml</code></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apply</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --filename</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hello-pipeline.yaml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="运行一个-pipelinerun" tabindex="-1"><a class="header-anchor" href="#运行一个-pipelinerun"><span>运行一个 PipelineRun</span></a></h3><p>先定义一个 <code>hello-pipeline-run.yaml</code></p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">tekton.dev/v1beta1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">PipelineRun</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">hello-pipeline-run</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    pipelineRef</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">hello-pipeline</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    params</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">P_MESSAGE</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Pipeline Run Message.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行 Hello PipelineRun</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apply</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --filename</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hello-pipeline-run.yaml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><div class="hint-container tip"><p class="hint-container-title">总结</p><p>TektonCD 入门到这里就结束了，下一篇准备写一下项目中的实践经验和更深入的使用技巧。</p></div><div class="hint-container info"><p class="hint-container-title">相关资源</p><ul><li><a href="https://tekton.dev/" target="_blank" rel="noopener noreferrer">Tekton 官方文档</a></li><li><a href="https://kubernetes.io/" target="_blank" rel="noopener noreferrer">Kubernetes 官方文档</a></li><li><a href="https://www.docker.com/products/docker-desktop/" target="_blank" rel="noopener noreferrer">Docker Desktop</a></li></ul></div>`,51)])])}const o=i(h,[["render",p]]),c=JSON.parse('{"path":"/posts/tektoncd-intro.html","title":"TektonCD 入门 - 云原生 CI/CD","lang":"zh-CN","frontmatter":{"title":"TektonCD 入门 - 云原生 CI/CD","date":"2022-09-23T00:00:00.000Z","category":["开发"],"tag":["TektonCD","Kubernetes","CI/CD","DevOps"],"star":true,"excerpt":"深入了解 TektonCD，一个运行于 Kubernetes 之上的云原生 CI/CD 系统，探索其核心概念和实践应用。","cover":"/covers/tektoncd-intro.png","description":"TektonCD Cover 先来回答几个问题 Tekton 是什么？ Tekton 是一个运行于 K8S 之上的，云原生 CI/CD 系统。 Tekton 可以做什么？ 编排 CI/CD 任务，执行 build 、test、deploy 等操作； 基于容器的 Runtime，让 Tekton 不仅限于只是 CI/CD 工具，可以执行任何容器化编排任务...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"TektonCD 入门 - 云原生 CI/CD\\",\\"image\\":[\\"https://gumutianqi.github.io/covers/tektoncd-intro.png\\"],\\"datePublished\\":\\"2022-09-23T00:00:00.000Z\\",\\"dateModified\\":\\"2025-08-31T18:51:51.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"古老师 (LarryKoo)\\",\\"url\\":\\"https://gumutianqi.github.io\\",\\"email\\":\\"larry.koo711@gmail.com\\"}]}"],["meta",{"property":"og:url","content":"https://gumutianqi.github.io/posts/tektoncd-intro.html"}],["meta",{"property":"og:site_name","content":"古老师的博客"}],["meta",{"property":"og:title","content":"TektonCD 入门 - 云原生 CI/CD"}],["meta",{"property":"og:description","content":"TektonCD Cover 先来回答几个问题 Tekton 是什么？ Tekton 是一个运行于 K8S 之上的，云原生 CI/CD 系统。 Tekton 可以做什么？ 编排 CI/CD 任务，执行 build 、test、deploy 等操作； 基于容器的 Runtime，让 Tekton 不仅限于只是 CI/CD 工具，可以执行任何容器化编排任务..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://gumutianqi.github.io/covers/tektoncd-intro.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-08-31T18:51:51.000Z"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://gumutianqi.github.io/covers/tektoncd-intro.png"}],["meta",{"name":"twitter:image:alt","content":"TektonCD 入门 - 云原生 CI/CD"}],["meta",{"property":"article:tag","content":"DevOps"}],["meta",{"property":"article:tag","content":"CI/CD"}],["meta",{"property":"article:tag","content":"Kubernetes"}],["meta",{"property":"article:tag","content":"TektonCD"}],["meta",{"property":"article:published_time","content":"2022-09-23T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-08-31T18:51:51.000Z"}]]},"git":{"createdTime":1756666311000,"updatedTime":1756666311000,"contributors":[{"name":"gujianguo","username":"gujianguo","email":"gujianguo@meiqia.com","commits":1,"url":"https://github.com/gujianguo"}]},"readingTime":{"minutes":2.76,"words":828},"filePathRelative":"posts/tektoncd-intro.md","autoDesc":true}');export{o as comp,c as data};
